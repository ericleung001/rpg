<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GM ç®¡ç†å¾Œå°</title>
    <style>
        body { background: #222; color: #fff; font-family: monospace; padding: 20px; text-align: center; }
        input, select, button { padding: 10px; margin: 5px; width: 100%; max-width: 300px; box-sizing: border-box; }
        button { background: #e74c3c; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:active { background: #c0392b; transform: translateY(2px); }
        .log { margin-top: 20px; color: #f1c40f; white-space: pre-wrap; border: 1px solid #555; padding: 10px; min-height: 100px; text-align: left; background: #000; }
        hr { border: 0; border-top: 1px solid #444; margin: 20px 0; }
        h3 { margin-top: 0; }
        
        optgroup { color: #f1c40f; background: #333; font-weight: bold; }
        option { color: #fff; background: #222; }
    </style>
</head>
<body>

    <h1>ğŸ”§ GM ç®¡ç†å¾Œå°</h1>

    <input type="password" id="admin-pass" placeholder="è¼¸å…¥ç®¡ç†å“¡å¯†ç¢¼">
    <input type="text" id="target-name" placeholder="ç›®æ¨™ç©å®¶åç¨± (Username)">
    
    <hr>

    <h3 style="color: #e74c3c;">ğŸš§ ç³»çµ±ç¶­è­·</h3>
    <div style="display:flex; justify-content:center; gap:10px;">
        <button onclick="setMaintenance(true)" style="background:#c0392b;">ğŸ”´ é–‹å•Ÿç¶­è­· (è¸¢äºº)</button>
        <button onclick="setMaintenance(false)" style="background:#27ae60;">ğŸŸ¢ é—œé–‰ç¶­è­· (é–‹æ”¾)</button>
    </div>

    <hr>

    <h3 style="color: #9b59b6;">ğŸ” å¸³è™Ÿç®¡ç†</h3>
    <div style="display:flex; flex-direction: column; align-items: center;">
        <input type="text" id="new-pass" placeholder="è¼¸å…¥æ–°å¯†ç¢¼">
        <button onclick="resetPassword()" style="background:#8e44ad;">é‡ç½®è©²ç©å®¶å¯†ç¢¼</button>
    </div>

    <hr>

    <h3 style="color: #f1c40f;">ğŸ’° é‡‘éŒ¢ç®¡ç†</h3>
    <div style="display:flex; flex-direction: column; align-items: center;">
        <select id="gold-mode">
            <option value="add">â• å¢åŠ  (è¼¸å…¥è² æ•¸å‰‡æ‰£é™¤)</option>
            <option value="set">ğŸ›‘ ç›´æ¥è¨­å®š (è¦†è“‹ç¸½é¡)</option>
        </select>
        <input type="number" id="gold-amount" placeholder="é‡‘é¡">
        <button onclick="modifyGold()" style="background:#f39c12;">åŸ·è¡Œé‡‘é¡è®Šæ›´</button>
    </div>

    <hr>

    <h3 style="color: #3498db;">ğŸ ç™¼é€ç‰©å“</h3>
    <input type="text" id="item-id" placeholder="ç‰©å“ ID (å¯ç›´æ¥è¼¸å…¥æˆ–é¸ä¸‹æ–¹åˆ—è¡¨)">
    
    <select id="common-items" onchange="document.getElementById('item-id').value = this.value">
        <option value="">-- å¿«é€Ÿé¸æ“‡ç‰©å“ --</option>
        
        <optgroup label="=== æ¶ˆè€—å“ ===">
            <option value="potion_hp">å°ç´…è—¥æ°´ (HP+50)</option>
            <option value="potion_mid">ä¸­ç´…è—¥æ°´ (HP+500)</option>
            <option value="potion_high">å¤§ç´…è—¥æ°´ (HP+2000)</option>
            <option value="potion_max">ç‰¹ç´šç§˜è—¥ (HP+10000)</option>
            <option value="elixir">ç¥ä¹‹ç”˜éœ² (HP+50000)</option>
            <option value="potion_mp">å°è—è—¥æ°´ (MP+30)</option>
            <option value="potion_mp_mid">ä¸­è—è—¥æ°´ (MP+100)</option>
            <option value="potion_mp_high">å¤§è—è—¥æ°´ (MP+500)</option>
            <option value="grilled_carp">çƒ¤é¯‰é­š (HP+100)</option>
            <option value="salmon_sushi">é®­é­šå£½å¸ (MP+50)</option>
            <option value="tuna_steak">ç…é®ªé­šæ’ (HP+500)</option>
            <option value="eel_rice">é°»é­šé£¯ (HP+300, MP+100)</option>
            <option value="void_soup">è™›ç©ºæµ·é®®æ¹¯ (å…¨æ»¿)</option>
            <option value="sushi_plate">å£½å¸æ‹¼ç›¤ (HP+500)</option>
        </optgroup>

        <optgroup label="=== ææ–™ ===">
            <option value="copper_ore">éŠ…ç¤¦çŸ³</option>
            <option value="soft_fur">æŸ”è»Ÿçš®æ¯›</option>
            <option value="beast_fang">é‡ç¸å°–ç‰™</option>
            <option value="slime_gel">é»æ¶²</option>
            <option value="iron_ore">éµç¤¦çŸ³</option>
            <option value="leather">çš®é©</option>
            <option value="tough_hide">ç¡¬çš®é©</option>
            <option value="magic_dust">é­”ç²‰</option>
            <option value="poison_sac">æ¯’å›Š</option>
            <option value="bone_shard">ç¢éª¨ç‰‡</option>
            <option value="silver_ore">éŠ€ç¤¦çŸ³</option>
            <option value="fire_core">ç«ç„°æ ¸å¿ƒ</option>
            <option value="lava_rock">ç†”å²©çŸ³</option>
            <option value="dragon_scale">é¾é±—</option>
            <option value="gold_ore">é‡‘ç¤¦çŸ³</option>
            <option value="ice_crystal">æ°¸æ†å†°æ™¶</option>
            <option value="yeti_fur">é›ªæ€ªæ¯›çš®</option>
            <option value="spirit_dust">éˆé­‚ç²‰æœ«</option>
            <option value="mithril">ç§˜éŠ€</option>
            <option value="void_dust">è™›ç©ºä¹‹å¡µ</option>
            <option value="demon_horn">æƒ¡é­”ä¹‹è§’</option>
            <option value="dark_essence">æš—ä¹‹ç²¾è¯</option>
            <option value="adamantite">ç²¾é‡‘</option>
            <option value="god_blood">ç¥ä¹‹è¡€</option>
            <option value="chaos_orb">æ··æ²Œå¯¶ç </option>
            <option value="angel_feather">å¤©ä½¿ä¹‹ç¾½</option>
            <option value="oak_log">æ©¡æœ¨åŸæœ¨</option>
            <option value="maple_log">æ¥“æœ¨åŸæœ¨</option>
            <option value="yew_log">ç´«æ‰åŸæœ¨</option>
            <option value="ancient_log">é å¤ç¥æœ¨</option>
            <option value="spirit_wood">éˆæœ¨</option>
            <option value="dragon_wood">é¾éª¨æœ¨</option>
            <option value="void_wood">è™›ç©ºæœ¨</option>
            <option value="chaos_wood">æ··æ²Œç¥æœ¨</option>
            <option value="carp">é¯‰é­š</option>
            <option value="salmon">é®­é­š</option>
            <option value="koi">éŒ¦é¯‰</option>
            <option value="magic_fish">é­”åŠ›é­š</option>
            <option value="tuna">é»‘é®ªé­š</option>
            <option value="shark">å¤§ç™½é¯Š</option>
            <option value="lava_eel">ç†”å²©é°»</option>
            <option value="void_squid">è™›ç©ºçƒè³Š</option>
            <option value="god_carp">ç¥ä¹‹é¯‰</option>
            <option value="pearl">çç </option>
            <option value="coal">ç…¤ç‚­</option>
            <option value="ruby">ç´…å¯¶çŸ³</option>
            <option value="diamond">é‘½çŸ³</option>
            <option value="star_fragment">æ˜Ÿä¹‹ç¢ç‰‡</option>
        </optgroup>

        <optgroup label="=== æ­¦å™¨ ===">
            <option value="wood_sword">æœ¨åŠ</option>
            <option value="copper_dagger">éŠ…åŒ•é¦–</option>
            <option value="oak_bow">æ©¡æœ¨å¼“</option>
            <option value="iron_sword">éµåŠ</option>
            <option value="spike_club">ç‹¼ç‰™æ£’</option>
            <option value="maple_staff">æ¥“æœ¨æ³•æ–</option>
            <option value="poison_dag">åŠ‡æ¯’åŒ•é¦–</option>
            <option value="shark_tooth">é¯Šé­šç‰™åŒ•é¦–</option>
            <option value="silver_blade">éŠ€åˆƒ</option>
            <option value="flame_staff">ç«ç„°æ³•æ–</option>
            <option value="emerald_staff">ç¿¡ç¿ æ³•æ–</option>
            <option value="gold_axe">é»ƒé‡‘å·¨æ–§</option>
            <option value="frost_bow">å¯’å†°å¼“</option>
            <option value="obsidian_blade">é»‘æ›œçŸ³ä¹‹åŠ</option>
            <option value="dragon_spear">é¾éª¨é•·æ§</option>
            <option value="mithril_saber">ç§˜éŠ€è»åˆ€</option>
            <option value="void_reaper">è™›ç©ºæ”¶å‰²è€…</option>
            <option value="god_slayer">å¼’ç¥åŠ</option>
            <option value="chaos_staff">æ··æ²Œæ³•æ–</option>
            <option value="hero_sword">å‹‡è€…ä¹‹åŠ</option>
            <option value="steel_blade">ç²¾é‹¼åŠ</option>
            <option value="assassin_dag">åˆºå®¢çŸ­åˆ€</option>
        </optgroup>

        <optgroup label="=== é˜²å…· ===">
            <option value="cloth_armor">å¸ƒè¡£</option>
            <option value="hunt_vest">çµäººèƒŒå¿ƒ</option>
            <option value="leather_armor">çš®ç”²</option>
            <option value="plate_mail">æ¿é‡‘ç”²</option>
            <option value="dragon_mail">é¾é±—ç”²</option>
            <option value="chain_mail">é–å­ç”²</option>
            <option value="magma_plate">ç†”å²©èƒ¸ç”²</option>
            <option value="ice_robe">å†°éœœæ³•è¢</option>
            <option value="yeti_cloak">é›ªæ€ªæ–—ç¯·</option>
            <option value="demon_armor">æƒ¡é­”æˆ°ç”²</option>
            <option value="angel_armor">ç†¾å¤©ä½¿é§ç”²</option>
        </optgroup>

        <optgroup label="=== é£¾å“ ===">
            <option value="bone_ring">éª¨æˆ’</option>
            <option value="fish_ring">é­šé±—æˆ’æŒ‡</option>
            <option value="snake_boots">è›‡çš®é•·é´</option>
            <option value="ring_str">åŠ›é‡æˆ’æŒ‡</option>
            <option value="ring_life">ç”Ÿå‘½è­·ç¬¦</option>
            <option value="ring_magic">é­”åŠ›è€³ç’°</option>
            <option value="pearl_necklace">çç é …éŠ</option>
            <option value="amulet_soul">éˆé­‚è­·ç¬¦</option>
            <option value="ring_lord">é ˜ä¸»æŒ‡ç’°</option>
            <option value="crown_chaos">æ··æ²Œä¹‹å† </option>
        </optgroup>
    </select>

    <input type="number" id="item-count" placeholder="æ•¸é‡" value="1">
    <button onclick="sendItem()">ğŸš€ ç™¼é€ç‰©å“</button>

    <div class="log" id="log-area">ç­‰å¾…æ“ä½œ...</div>

    <script src="socket.io.js"></script>
    <script>
        const _0x5a1b = "aHR0cHM6Ly9ycGdnYW1lc2VyLmNj"; 
        const BACKEND_URL = atob(_0x5a1b);
        const socket = io(BACKEND_URL, { transports: ['websocket', 'polling'], secure: true });

        socket.on('connect', () => {
            log("âœ… é€£ç·šæˆåŠŸï¼Œè«‹è¼¸å…¥å¯†ç¢¼èˆ‡ç©å®¶åç¨±ã€‚");
        });

        function setMaintenance(mode) {
            const pass = document.getElementById('admin-pass').value;
            if(!pass) { alert("è«‹è¼¸å…¥ç®¡ç†å“¡å¯†ç¢¼"); return; }
            
            const action = mode ? "é–‹å•Ÿç¶­è­·ä¸¦è¸¢å‡ºæ‰€æœ‰ç©å®¶" : "é—œé–‰ç¶­è­·ä¸¦é–‹æ”¾ç™»å…¥";
            if(!confirm(`ç¢ºå®šè¦ ${action} å—ï¼Ÿ`)) return;

            log(`[è«‹æ±‚] æ­£åœ¨ ${action}...`);
            socket.emit('adminSetMaintenance', {
                adminPass: pass,
                mode: mode
            });
        }

        // ğŸŸ¢ é‡ç½®å¯†ç¢¼åŠŸèƒ½
        function resetPassword() {
            const pass = document.getElementById('admin-pass').value;
            const name = document.getElementById('target-name').value;
            const newPass = document.getElementById('new-pass').value;

            if(!pass || !name || !newPass) { alert("è«‹è¼¸å…¥å¯†ç¢¼ã€ç©å®¶åç¨±èˆ‡æ–°å¯†ç¢¼"); return; }
            if(newPass.length < 5) { alert("æ–°å¯†ç¢¼è‡³å°‘éœ€ 5 å­—å…ƒ"); return; }

            log(`[è«‹æ±‚] é‡ç½®ç©å®¶ ${name} çš„å¯†ç¢¼...`);
            socket.emit('adminResetPass', {
                adminPass: pass,
                targetName: name,
                newPass: newPass
            });
        }

        function modifyGold() {
            const pass = document.getElementById('admin-pass').value;
            const name = document.getElementById('target-name').value;
            const mode = document.getElementById('gold-mode').value;
            const amount = document.getElementById('gold-amount').value;

            if(!pass || !name || !amount) { alert("è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½"); return; }

            const actionText = mode === 'add' ? 'å¢åŠ /æ‰£é™¤' : 'è¨­å®šç‚º';
            log(`[è«‹æ±‚] å°‡ ${name} çš„é‡‘éŒ¢ ${actionText} ${amount}...`);

            socket.emit('adminSetGold', {
                adminPass: pass,
                targetName: name,
                amount: amount,
                mode: mode
            });
        }

        function sendItem() {
            const pass = document.getElementById('admin-pass').value;
            const name = document.getElementById('target-name').value;
            const item = document.getElementById('item-id').value;
            const count = document.getElementById('item-count').value;

            if(!pass || !name || !item || !count) { alert("è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½"); return; }

            log(`[è«‹æ±‚] ç™¼é€ ${count} å€‹ [${item}] çµ¦ ${name}...`);
            
            socket.emit('adminGiveItem', {
                adminPass: pass,
                targetName: name,
                itemId: item,
                count: count
            });
        }

        socket.on('adminResult', (res) => {
            log(res.msg);
        });

        function log(msg) {
            const area = document.getElementById('log-area');
            area.innerText = `[${new Date().toLocaleTimeString()}] ${msg}\n` + area.innerText;
        }
    </script>
</body>
</html>
